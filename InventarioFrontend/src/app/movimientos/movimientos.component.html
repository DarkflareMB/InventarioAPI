<div class="movimientos-wrapper" [ngClass]="{'modo-oscuro': modoOscuro}">
  <div class="movimientos-card">
    <h2>Registrar Movimiento</h2>

    <button class="volver-inventario" (click)="irAInventario()">Volver al Inventario</button>

    <form (ngSubmit)="registrarMovimiento()">
      <div class="form-group">
        <label for="producto">Producto</label>
        <input type="text" id="producto" [(ngModel)]="productoBusqueda"
               (input)="filtrarProductos()" (change)="validarProductoSeleccionado()"
               (click)="mostrarLista = true" placeholder="Escribe para buscar..." autocomplete="off" name="producto">

        <!-- Lista desplegable estilizada -->
        <div class="dropdown" *ngIf="mostrarLista && productosFiltrados.length > 0">
          <ul>
            <li *ngFor="let producto of productosFiltrados"
                (click)="seleccionarProducto(producto); mostrarLista = false;">
              {{ producto.nombre }}
            </li>
          </ul>
        </div>
      </div>

      <div class="form-group">
        <label for="cantidad">Cantidad</label>
        <input type="number" id="cantidad" [(ngModel)]="movimiento.cantidad" name="cantidad"
               placeholder="Ingresa la cantidad" required>
      </div>

      <div class="form-group">
        <label for="tipo">Tipo de Movimiento</label>
        <select id="tipo" [(ngModel)]="movimiento.tipo" name="tipo" required>
          <option value="entrada">Entrada</option>
          <option value="salida">Salida</option>
        </select>
      </div>

      <button type="submit" class="movimiento-button">Registrar Movimiento</button>
    </form>

    <div *ngIf="mensaje" class="mensaje">{{ mensaje }}</div>
  </div>
</div>
